# 后处理系列
## 前置知识
后处理是输入整个屏幕, 输出一整个屏幕的渲染过程, 如果用一个摄像机渲染一张RT的方式, 后处理多起来可能就比较要命了. 另外, 这种方式也很难控制后处理的先后顺序.
幸运的是, Unity 似乎提供了一种机制能管理多个后处理渲染. ~~具体做法先鸽一两天.~~ 不幸的是, 似乎需要使用HLSL才能得到正确的效果, 使用 CGPROGRAM 代码块会出现蜜汁三角形和背景闪烁的效果. 

在 OnRenderImage 里使用 Graphic.Blit 就能实现在渲染流程末尾加上一些操作的效果, 这是极好的. 而且多个组件的后处理可以叠加, 在需要自定义特殊后处理效果时可以非常方便地叠加多种效果.

## 灰度

把 `color.rgb` 点乘一个神秘的向量`(0.2126729, 0.7151522, 0.0721750)`, 然后再用 _Blend 参数在原色和灰度色之间插值即可.


## 画面抖动
在读取输入的纹理时按照一定的条件进行一定的偏移, 就能得到一个撕裂的效果. 而[使参数随时间变化](Jitter/Jitter_Mono.cs)即可得到一个简单的画面抖动效果. 但是, 想有一个更丰富或者更真实的效果. 离不开专门制作的特效纹理. 简单地引入一些函数很难达到理想的效果.

## 色散
分三重采样, 假设波长较长的红光在向外偏移, 波长较短的蓝光向内偏移, 而绿光相对不变. 这样就得到了一个类似于透镜折射的色散效果. 具体的偏移量取坐标与中心的距离向量. 实际物理情况可能不是线性关系, 但这里看着差不多就行了XD
值得注意的另一点是, 由于三个颜色通道的采样点距离较远, 偏移量太大时会明显看出有图层的分离. 比较简单的处理方案就是多采样几层, 这里设置了32次采样, 每次偏移量逐渐增加.

